# setup.cfg provides centralized configuration for developer tools.
# It ensures consistency across local development and CI workflows (via `make lint`, `make test`, etc.)

# ─── Flake8 ───────────────────────────────────────────────────────────────
# Used for Python linting (via `make lint` or CI).
#
# Ignored error codes and rationale:
#   E203   - Whitespace before ':' - conflicts with black formatter
#   E501   - Line too long - disabled (unlimited line length allowed)
#   W503   - Line break before binary operator - conflicts with black
#   D100   - Missing docstring in public module - too aggressive for gradual adoption
#   D101   - Missing docstring in public class - too aggressive for gradual adoption
#   D102   - Missing docstring in public method - too aggressive for gradual adoption
#   D103   - Missing docstring in public function - too aggressive for gradual adoption
#   D104   - Missing docstring in public package - too aggressive for gradual adoption
#   D105   - Missing docstring in magic method - often unnecessary noise
#   D200   - One-line docstring formatting - stylistic preference
#   D205   - Blank line after summary - stylistic preference
#   D400   - First line should end with period - stylistic preference
#   D401   - First line imperative mood - too rigid for existing code
#   SIM114 - Logical or simplification - can reduce code readability
#   SIM105 - Use contextlib.suppress - not always clearer than try/except
#   SIM115 - Use context manager for files - sometimes unnecessary complexity
#   I100   - Import order - handled by isort tool instead
#
[flake8]
max-line-length = 9999
extend-ignore =
    E203,
    E501,
    W503,
    D100,
    D101,
    D102,
    D103,
    D104,
    D105,
    D200,
    D202,
    D205,
    D400,
    D401,
    SIM114,
    SIM105,
    SIM115,
    I100
exclude = .venv, __pycache__, .git, .mypy_cache, .pytest_cache
#
# File-specific ignores for legitimate exceptions:
#   tests/*:F401,F811              - Allow unused imports and redefinitions in test files
#   __init__.py:F401               - Allow unused imports in package init files
#   setup.py:D100                  - Allow missing module docstring in setup script
#   devtools/metadata_display.py:U100 - Allow unused args in signal handlers and callbacks
#
per-file-ignores =
    tests/*:F401,F811
    __init__.py:F401
    setup.py:D100
    devtools/metadata_display.py:U100

# ─── Pytest ───────────────────────────────────────────────────────────────
# Used for test discovery and output formatting (via `make test` or VS Code test UI).
[tool:pytest]
testpaths = tests
# summary of skipped/failed/etc, less noise
addopts = -ra -q
# Ensure Python can find the nowplaying module
pythonpath = .

# ─── Mypy ─────────────────────────────────────────────────────────────────
# Static type checking (if you choose to use type hints).
[mypy]
ignore_missing_imports = True
disallow_untyped_defs = False
warn_unused_ignores = True

# ─── Black ───────────────────────────────────────────────────────────────
# Used for auto-formatting Python code (via `make format` or pre-commit hooks).
[tool.black]
line-length = 9999
target-version = ['py38']
